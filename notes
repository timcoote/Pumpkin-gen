working with fpm and building the local repo in /home/pi/debs, this: http://bit.ly/2wPWyAY may show how to remove the error
that started in Stretch complaining about no Release file.

move to Stretch from Jessie firmed up apt's security model, so local repo now needs to be signed.

build out pi-gen (but not much more)
---2017-8-31: reverting some of the debugging changes that I made below with a view to more closely tracking upstream on the dev branch

## the approach below seems to build A disk image, but not clear how to automate within pi-gen, nor what to do about the hubaccess code (CONTAINER_NAME
# is set to pigen_work (as set up on the build-docker.sh script)
docker run --privileged -ti -v /sys/fs/cgroup:/sys/fs/cgroup:ro --volumes-from="${CONTAINER_NAME}" --cap-add=SYS_ADMIN -e IMG_NAME=cutdown pi-gen

log in as tim
sudo su
then paste in the remaingin command:
<cannot find at the moment, the bit over 3 lines, ending with "
# then in a subshell
#
should still work:
systemctl status

then run ./build.sh

we should then be in a position to run the ansible script in smart-home

build.sh fails (this takes 2 hours on my computer) :: need to capture failure: retrying

, but copy/pasting the stage3/00-in<blah>/01-run.sh on_chroot bits now get to hubaccess Get Mac address (which is clearly not something that should
happen as part of the disk image creation process!). can run ansible-playbook with --skip-tags hubaccess. gitlab{user,password} passed in as env variables to the chroot
seems to work.

Disk creation needs to copy the smart-homes code to /home/pi? - did not work as tried initially
--

unsure on where to put the apt/sources.list change for ansible
